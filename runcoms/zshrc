#
# Executes commands at the start of an interactive session.
#
# Authors:
#   Augusto Elesb√£o <aelesbao@gmail.com>
#   Sorin Ionescu <sorin.ionescu@gmail.com>
#

# Source Prezto.
if [[ -s "${ZDOTDIR:-$HOME}/.zprezto/init.zsh" ]]; then
  source "${ZDOTDIR:-$HOME}/.zprezto/init.zsh"
fi

# Customize to your needs...
#
stty -ixon # set the options for a terminal device interface

setopt HIST_IGNORE_SPACE # history ignores lines starting with white spaces

# Use CTRL+arrows to move backward and forward words
bindkey ';5D' emacs-backward-word
bindkey ';5C' emacs-forward-word

# Aliases
alias resource="source ~/.zshrc"

alias pwsafe=' pwsafe'
alias cdgr='cd $(git-root)'
alias psg='ps aux | grep -i'
alias ghb='hub browse'
alias backup='rsync -Pha'
alias date-iso='date +%Y-%m-%dT%H:%M:%S%z'

alias youtube-dl-mp3='youtube-dl -x --audio-format mp3 --audio-quality 320K'

[[ "$OSTYPE" == darwin* ]] && alias htop='sudo htop'

# Solarized dir_colors
[[ -f /etc/dir_colors ]] && eval `dircolors /etc/dir_colors`

# JDK
[[ -x /usr/libexec/java_home ]] && export JAVA_HOME=`/usr/libexec/java_home`

# Android SDK path
[[ -d /usr/local/opt/android-sdk ]] && export ANDROID_HOME=/usr/local/opt/android-sdk

# Add custom /bin
[[ -d "$HOME/bin" ]] && export PATH="$HOME/bin:$PATH"
export PATH="./bin:./node_modules/.bin:$PATH"

# Heroku Client
[[ -d /usr/local/heroku/bin ]] && export PATH="/usr/local/heroku/bin:$PATH"

# FZF - Shell Fuzzy Finder
[[ -f ~/.fzf.zsh ]] && source ~/.fzf.zsh

# iTerm 2 Shell Integration
[[ -f "$HOME/.iterm2_shell_integration.zsh" ]] && source "$HOME/.iterm2_shell_integration.zsh"

[[ -d "$HOME/nvm" ]] && export NVM_DIR="$HOME/.nvm"
function nvm-enable {
  if [[ "$OSTYPE" == darwin* ]]; then
    nvm_prefix=$(brew --prefix nvm)
  fi
  [[ -d $nvm_prefix ]] && source $nvm_prefix/nvm.sh
}

function start-docker {
  zsh --login '/Applications/Docker/Docker Quickstart Terminal.app/Contents/Resources/Scripts/start.sh' 
}

function kafka-server {
  JAVA_HOME="$(/usr/libexec/java_home -v 1.7)" kafka-server-start.sh /usr/local/etc/kafka/server.properties
}

function start-datomic-console {
  DB=$1
  datomic-console -p 3000 $DB datomic:dev://localhost:4334/$DB
}

# Installs completions that were not auto installed
function install-completions {
  [ -f /usr/local/share/zsh/site-functions/_brew ] || \
    ln -s $(brew --prefix)/Library/Contributions/brew_zsh_completion.zsh \
          /usr/local/share/zsh/site-functions/_brew
}

which hub >/dev/null && alias git=hub

# Load local zshrc
[[ -f "$HOME/.zshrc.local" ]] && source "$HOME/.zshrc.local"
